<div class="min-h-screen bg-gray-100">
  <%= render "shared/navbar" %>

  <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
    <%= render "shared/flash" %>

    <div class="px-4 sm:px-0">
      <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl font-bold text-gray-900">Calend√°rio de Consultas</h1>
        <div class="flex gap-2">
          <%= link_to "Lista", appointments_path, class: "bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700" %>
          <%= link_to "Nova Consulta", new_appointment_path, class: "bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700" %>
        </div>
      </div>

      <!-- Practitioner Filter -->
      <div class="mb-4">
        <%= form_with url: calendar_appointments_path, method: :get, class: "flex gap-4 items-center" do |f| %>
          <%= f.label :practitioner_id, "Filtrar por Profissional:", class: "text-sm font-medium text-gray-700" %>
          <%= f.collection_select :practitioner_id, @practitioners, :id, :name,
              { include_blank: "Todos" },
              { class: "px-3 py-2 border border-gray-300 rounded-md", onchange: "this.form.submit()" } %>
        <% end %>
      </div>

      <!-- Calendar Container -->
      <div class="bg-white shadow rounded-lg p-6">
        <div id="calendar"
             data-controller="calendar"
             data-calendar-events-url-value="<%= calendar_appointments_path(format: :json, practitioner_id: @selected_practitioner) %>"
             data-calendar-new-appointment-url-value="<%= new_appointment_path %>">
        </div>
      </div>
    </div>
  </main>
</div>
